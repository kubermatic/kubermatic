groups:
- name: kubernetes-absent
  rules:
  - alert: CadvisorDown
    annotations:
      message: Cadvisor has disappeared from Prometheus target discovery.
      runbook_url: https://docs.kubermatic.io/monitoring/runbook/#alert-cadvisordown
    expr: absent(up{job="cadvisor"} == 1)
    for: 15m
    labels:
      severity: critical

  - alert: KubernetesApiserverDown
    annotations:
      message: KubernetesApiserver has disappeared from Prometheus target discovery.
      runbook_url: https://docs.kubermatic.io/monitoring/runbook/#alert-kubernetesapiserverdown
    expr: absent(up{job="apiserver"} == 1)
    for: 15m
    labels:
      severity: critical

  - alert: KubeControllerManagerDown
    annotations:
      message: KubeControllerManager has disappeared from Prometheus target discovery.
      runbook_url: https://docs.kubermatic.io/monitoring/runbook/#alert-kubecontrollermanagerdown
    expr: absent(up{job="controller-manager"} == 1)
    for: 15m
    labels:
      severity: critical

  - alert: KubeSchedulerDown
    annotations:
      message: KubeScheduler has disappeared from Prometheus target discovery.
      runbook_url: https://docs.kubermatic.io/monitoring/runbook/#alert-kubeschedulerdown
    expr: absent(up{job="scheduler"} == 1)
    for: 15m
    labels:
      severity: critical

  - alert: KubeStateMetricsDown
    annotations:
      message: KubeStateMetrics has disappeared from Prometheus target discovery.
      runbook_url: https://docs.kubermatic.io/monitoring/runbook/#alert-kubestatemetricsdown
    expr: absent(up{job="kube-state-metrics"} == 1)
    for: 15m
    labels:
      severity: critical

  - alert: KubeletDown
    annotations:
      message: Kubelet has disappeared from Prometheus target discovery.
      runbook_url: https://docs.kubermatic.io/monitoring/runbook/#alert-kubeletdown
    expr: absent(up{job="kubelet"} == 1)
    for: 15m
    labels:
      severity: critical
