apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-kubermatic-rules
  labels:
    role: prometheus-rulefiles
data:
{{ (.Files.Glob "rules/*").AsConfig | indent 2 }}
  _customrules.yaml: |
{{- if .Values.prometheus.rules }}
{{ toYaml .Values.prometheus.rules | indent 4 }}
{{- else }}
    groups: []
{{- end}}
