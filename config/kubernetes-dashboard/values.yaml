# Copyright 2020 The Kubermatic Kubernetes Platform contributors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

dashboard:
  # Domain that Kubernetes Dashboard and oauth-proxy will be served on.
  domain: ""
  # If provided this token will be used as csrf token to prevent CSRF attacks, otherwise autogenerated one will be used.
  csrf: ""
  # Dashboard ingress configuration.
  ingress:
    # By default serve on root path. https://<domain>/
    path: "/"
  oauth:
    ingress:
      # By default serve on same domain as Dashboard. https://<domain>/oauth2/
      path: "/oauth2"
  oidc:
    # URL to used OIDC, i.e. "https://dev.kubermatic.io/dex"
    issuerUrl: ""
    # Restrict access to Dashboard to a single domain or use '*' for all.
    emailDomain: ""
    # Client ID configured in your OIDC provider.
    clientID: "dashboard"
    clientSecret: ""
    # Can be generated using: docker run -ti --rm python:3-alpine python -c 'import secrets,base64; print(base64.b64encode(base64.b64encode(secrets.token_bytes(16))));'
    cookieSecret: ""
  # If core Kubernetes cluster is configured to use same OIDC as the provided issuerUrl, set it to "$token", otherwise provide bearer token accepted by the API server in the seed cluster.
  # In such case your OIDC will only act as authentication mechanism and every user will have same privileges in the Dashboard.
  token: ""
  images:
    dashboard:
      repository: "docker.io/kubernetesui/dashboard"
      tag: "v2.0.0-rc3"
      pullPolicy: "IfNotPresent"
    proxy:
      repository: "quay.io/pusher/oauth2_proxy"
      tag: "v4.0.0"
      pullPolicy: "IfNotPresent"
    scraper:
      repository: "docker.io/kubernetesui/metrics-scraper"
      tag: "v1.0.3"
      pullPolicy: "IfNotPresent"

  deployment:
    # Config for the Kubernetes Dashboard deployment
    dashboard:
      nodeSelector:
        "beta.kubernetes.io/os": linux
      affinity: {}
      tolerations:
        - key: node-role.kubernetes.io/master
          effect: NoSchedule

    # Config for the OAuth Proxy deployment
    proxy:
      nodeSelector: {}
      affinity: {}
      tolerations:
        - key: node-role.kubernetes.io/master
          effect: NoSchedule

    # Config for the Scraper deployment
    scraper:
      nodeSelector:
        "beta.kubernetes.io/os": linux
      affinity: {}
      tolerations:
        - key: node-role.kubernetes.io/master
          effect: NoSchedule
