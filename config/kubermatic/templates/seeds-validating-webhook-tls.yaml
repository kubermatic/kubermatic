{{- $seedAdmissionControllerCA := genCA "seed-admission-controller" 3650 -}}
{{- $seedAdmissionControllerServingCN := "seed-webhook" -}}
{{- $seedAdmissionControllerServingAlt1 := (printf "seed-webhook.%s" .Release.Namespace) -}}
{{- $seedAdmissionControllerServingAlt2 := (printf "seed-webhook.%s.svc" .Release.Namespace) -}}
{{- $seedAdmissionControllerServingCert := genSignedCert $seedAdmissionControllerServingCN nil (list $seedAdmissionControllerServingAlt1 $seedAdmissionControllerServingAlt2) 3650 $seedAdmissionControllerCA -}}
apiVersion: v1
kind: Secret
metadata:
  name: seed-webhook-serving-cert
type: Opaque
data:
  caCert.pem: {{ b64enc $seedAdmissionControllerCA.Cert }}
  serverCert.pem: {{ b64enc $seedAdmissionControllerServingCert.Cert }}
  serverKey.pem: {{ b64enc $seedAdmissionControllerServingCert.Key }}
