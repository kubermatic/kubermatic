apiVersion: v1
kind: Service
metadata:
  name: apiserver-external
  annotations:
    nodeport-proxy.k8s.io/expose: "true"
  ownerReferences:
  - apiVersion: kubermatic.k8s.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: Cluster
    name: {{ .Cluster.Name }}
    uid: "{{ .Cluster.ObjectMeta.UID }}"
spec:
  type: NodePort
  ports:
    - name: secure
      port: {{ .GetApiserverExternalNodePortOrGetFree }}
      nodePort: {{ .GetApiserverExternalNodePortOrGetFree }}
      protocol: TCP
  selector:
    role: apiserver
